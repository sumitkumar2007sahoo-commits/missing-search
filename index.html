<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Sighting Tracker</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color: white;
  overflow-x: hidden;
}

header {
  padding: 15px;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
  background: rgba(0,0,0,0.3);
  backdrop-filter: blur(10px);
}

#map {
  height: 70vh;
  width: 100%;
}

.controls {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  padding: 15px;
}

button {
  padding: 10px 18px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  transition: 0.3s;
}

button:hover {
  transform: scale(1.05);
  opacity: 0.9;
}

.primary { background: #00c6ff; color: black; }
.secondary { background: #ff512f; }
.darkmode { background: #222; color: white; }

.stats {
  text-align: center;
  padding: 10px;
  font-size: 18px;
}

a.form-btn {
  text-decoration: none;
  padding: 10px 18px;
  border-radius: 6px;
  font-weight: bold;
  background: #00ff99;
  color: black;
}
</style>
</head>

<body>

<header>ğŸŒ Live Sighting Tracking System</header>

<div id="map"></div>

<div class="stats">
Total Reports: <span id="count">0</span>
</div>

<div class="controls">

<a href="https://docs.google.com/forms/d/e/1FAIpQLSeZiNwBdpad5OxZ6O9nlgkvhVvVC7rQzSxyFfFOInyWGZpW-A/viewform?usp=preview" target="_blank" class="form-btn">
ğŸ” Report Missing Form
</a>

<a href="https://docs.google.com/forms/d/e/1FAIpQLSezZ75eOhy8g-d6utcDJpltyjnm6CJlKG3DD-3FO_3ojQpRlA/viewform?usp=publish-editor" target="_blank" class="form-btn">
ğŸ“ Report Sighting Form
</a>

<button class="primary" onclick="goLatest()">ğŸ“ Go to Latest</button>
<button class="secondary" onclick="resetMap()">ğŸ”„ Reset</button>
<button class="primary" onclick="shareSite()">ğŸ“¤ Share</button>
<button class="darkmode" onclick="toggleDark()">ğŸŒ™ Dark Mode</button>

</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>

let map = L.map('map').setView([20,0],2);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  attribution:'Â© OpenStreetMap'
}).addTo(map);

let markers = [];
let stored = JSON.parse(localStorage.getItem("locations")) || [];

stored.forEach(loc => addMarker(loc.lat,loc.lng,false));

function addMarker(lat,lng,save=true){
  let marker = L.marker([lat,lng]).addTo(map);
  marker.bindPopup("Reported Location<br>"+lat.toFixed(4)+","+lng.toFixed(4));
  markers.push(marker);

  if(save){
    stored.push({lat,lng});
    localStorage.setItem("locations",JSON.stringify(stored));
  }

  document.getElementById("count").innerText = stored.length;
}

map.on("click", function(e){
  addMarker(e.latlng.lat,e.latlng.lng,true);
});

function goLatest(){
  if(stored.length>0){
    let last = stored[stored.length-1];
    map.setView([last.lat,last.lng],10);
  }
}

function resetMap(){
  localStorage.removeItem("locations");
  location.reload();
}

function shareSite(){
  navigator.clipboard.writeText(window.location.href);
  alert("Site link copied!");
}

function toggleDark(){
  if(document.body.style.background=="black"){
    document.body.style.background="linear-gradient(135deg,#0f2027,#203a43,#2c5364)";
  } else {
    document.body.style.background="black";
  }
}

document.getElementById("count").innerText = stored.length;

</script>

</body>
</html>
